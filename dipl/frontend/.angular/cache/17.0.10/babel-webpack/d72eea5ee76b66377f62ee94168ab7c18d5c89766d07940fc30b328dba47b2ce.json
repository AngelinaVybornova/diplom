{"ast":null,"code":"import { CommonModule } from \"@angular/common\";\nimport { FormsModule } from \"@angular/forms\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../app.component\";\nimport * as i2 from \"@angular/forms\";\nexport let SimulationFormComponent = /*#__PURE__*/(() => {\n  class SimulationFormComponent {\n    M = 0;\n    N = 0;\n    appComponentClass;\n    constructor(_appComponentClass) {\n      this.appComponentClass = _appComponentClass;\n    }\n    stopSimulation() {\n      this.appComponentClass.formChange.next(\"stopSim\");\n    }\n    // тут пишем логику на typescript\n    cockroaches = [];\n    ngOnInit() {\n      const bugIcons = document.getElementsByClassName(\"bug-icon\");\n      for (let i = 0; i < bugIcons.length; i++) {\n        this.makeCockroach(bugIcons[i]);\n      }\n      this.step();\n    }\n    makeCockroach(icon) {\n      const rect1 = document.querySelector(\".field\")?.getBoundingClientRect();\n      if (!rect1) return {\n        update: () => {}\n      }; // Проверка на наличие rect\n      let vspeed = 50;\n      const aspeed = 10 * Math.PI;\n      const p = document.createElement(\"img\");\n      let lastT = 0;\n      let lastTargetTime = -100;\n      let a = 0;\n      let x = Math.random() * (rect1.width - 20);\n      let y = Math.random() * (rect1.width - 20);\n      let tx = Math.random() * (rect1.width - 20);\n      let ty = Math.random() * (rect1.width - 20);\n      let dxy = 0;\n      const update = t => {\n        const rect = document.querySelector(\".field\")?.getBoundingClientRect();\n        if (!rect) return; // Проверка на наличие rect\n        if (t >= lastTargetTime + 3) {\n          p.remove;\n          tx = Math.random() * (rect.width - 20); // Ограничение по ширине\n          ty = Math.random() * (rect.height - 20); // Ограничение по высоте\n          console.log(\"coords\", tx, ty);\n          //t = t * 1000;\n          lastTargetTime = t;\n        }\n        const dt = t - lastT;\n        const app = document.getElementsByClassName(\"field\")[0];\n        p.src = \"https://svgshare.com/i/t12.svg\";\n        p.style.position = \"absolute\";\n        p.style.left = tx + \"px\";\n        p.style.top = ty + \"px\";\n        app?.appendChild(p);\n        app.style.backgroundColor = \"red\";\n        //console.log(\"новое\", tx, ty);\n        dxy = Math.sqrt(Math.pow(tx - x, 2) + Math.pow(ty - y, 2)) / 1000;\n        vspeed = dxy / dt;\n        //console.log(\"скорость\", vspeed, dt, dxy);\n        const ta = Math.atan2(ty - y, tx - x);\n        for (; a < ta; a += 2 * Math.PI) {}\n        for (; a > ta; a -= 2 * Math.PI) {}\n        const a2 = a + 2 * Math.PI;\n        if (ta - a < a2 - ta) {\n          a = Math.min(ta, a + dt * aspeed);\n        } else {\n          a = Math.max(ta, a2 - dt * aspeed);\n        }\n        console.log(\"xxx\", tx, ty);\n        for (let frame = 0; frame < 30; frame++) {\n          x += dt * vspeed * Math.cos(a);\n          y += dt * vspeed * Math.sin(a);\n        }\n        icon.style.left = x + \"px\";\n        icon.style.top = y + \"px\";\n        icon.style.transform = \"rotate(\" + (180 * a / Math.PI - 135) + \"deg)\";\n        lastT = t;\n      };\n      const cockroach = {\n        update: update\n      };\n      this.cockroaches.push(cockroach);\n      return cockroach;\n    }\n    step() {\n      const t = performance.now() / 1000;\n      for (const cockroach of this.cockroaches) {\n        cockroach.update(t);\n      }\n      window.requestAnimationFrame(() => this.step());\n    }\n    static ɵfac = function SimulationFormComponent_Factory(t) {\n      return new (t || SimulationFormComponent)(i0.ɵɵdirectiveInject(i1.AppComponent));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: SimulationFormComponent,\n      selectors: [[\"simulationForm-comp\"]],\n      inputs: {\n        M: \"M\",\n        N: \"N\"\n      },\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 22,\n      vars: 4,\n      consts: [[1, \"navbar\", \"navbar-expand-sm\", \"bg-dark\", \"navbar-dark\"], [1, \"container-fluid\"], [1, \"navbar-nav\", \"mx-auto\"], [1, \"nav-item\"], [1, \"ligo\"], [1, \"d-flex\"], [1, \"field\"], [\"id\", \"bug-container\", 1, \"header\"], [\"id\", \"bug\", \"src\", \"https://svgshare.com/i/t12.svg\", 1, \"bug-icon\"], [1, \"center\"], [3, \"click\"], [\"type\", \"image/svg+xml\", \"data\", i0.ɵɵtrustConstantResourceUrl`/src/app/Animals/body1.svg`], [\"src\", \"/src/app/Animals/body1.svg\", 1, \"imgbody1\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"1301\", \"height\", \"2022\", \"viewBox\", \"0 0 1301 2022\", \"version\", \"1.1\"], [\"d\", \"\", \"stroke\", \"none\", \"fill\", \"#080404\", \"fill-rule\", \"evenodd\"], [\"d\", \"M 624.345 1508.250 C 624.090 1508.662, 622.327 1509, 620.427 1509 C 618.527 1509, 616.191 1509.377, 615.236 1509.838 C 614.281 1510.299, 612.150 1511.336, 610.500 1512.144 L 607.500 1513.612 607.784 1528.518 C 607.940 1536.717, 608.473 1543.674, 608.967 1543.980 C 609.462 1544.285, 610.187 1550.827, 610.578 1558.518 C 610.969 1566.208, 611.647 1572.735, 612.084 1573.021 C 612.520 1573.308, 613.196 1579.270, 613.585 1586.271 C 613.974 1593.272, 614.636 1599, 615.055 1599 C 615.475 1599, 616.142 1604.850, 616.538 1612 C 616.933 1619.150, 617.649 1625, 618.128 1625 C 618.608 1625, 619 1628.600, 619 1633 C 619 1637.400, 619.349 1641, 619.776 1641 C 620.203 1641, 620.377 1642.839, 620.163 1645.087 C 619.949 1647.334, 620.274 1649.674, 620.887 1650.287 C 621.499 1650.899, 622 1654.460, 622 1658.200 C 622 1661.940, 622.382 1665, 622.848 1665 C 623.314 1665, 624.005 1671.171, 624.384 1678.713 C 624.762 1686.256, 625.443 1692.668, 625.897 1692.963 C 626.350 1693.258, 627.044 1700.475, 627.439 1709 C 627.834 1717.525, 628.571 1724.650, 629.078 1724.833 C 629.585 1725.017, 630.005 1726.592, 630.011 1728.333 C 630.017 1730.075, 630.301 1733.188, 630.642 1735.250 C 630.983 1737.313, 631.825 1739, 632.514 1739 C 633.203 1739, 634.038 1737.987, 634.370 1736.750 C 634.701 1735.513, 634.979 1732.362, 634.986 1729.750 C 634.994 1727.138, 635.403 1725, 635.895 1725 C 636.387 1725, 637.088 1717.912, 637.454 1709.250 C 637.819 1700.588, 638.518 1692.600, 639.007 1691.500 C 639.496 1690.400, 640.124 1687.250, 640.404 1684.500 C 640.684 1681.750, 640.909 1676.013, 640.904 1671.750 C 640.899 1666.989, 641.302 1664, 641.948 1664 C 642.581 1664, 643 1661.291, 643 1657.200 C 643 1653.460, 643.422 1649.973, 643.937 1649.450 C 644.452 1648.928, 645.160 1643.325, 645.510 1637 C 645.860 1630.675, 646.537 1624.600, 647.013 1623.500 C 647.490 1622.400, 648.177 1615.763, 648.540 1608.750 C 648.904 1601.737, 649.539 1596, 649.951 1596 C 650.363 1596, 651.011 1590.503, 651.390 1583.784 C 651.770 1577.065, 652.459 1571.328, 652.921 1571.034 C 653.384 1570.740, 654.090 1563.975, 654.491 1556 C 654.893 1548.025, 655.581 1541.050, 656.022 1540.500 C 656.462 1539.950, 657.143 1533.851, 657.536 1526.946 C 658.164 1515.874, 658.048 1514.191, 656.553 1512.696 C 655.620 1511.763, 654.016 1511, 652.988 1511 C 651.959 1511, 650.840 1510.550, 650.500 1510 C 650.160 1509.450, 648.409 1509, 646.608 1509 C 644.807 1509, 643.070 1508.737, 642.748 1508.415 C 642.426 1508.093, 638.258 1507.756, 633.486 1507.665 C 628.713 1507.574, 624.600 1507.838, 624.345 1508.250\", \"stroke\", \"none\", \"fill\", \"#040404\", \"fill-rule\", \"evenodd\"]],\n      template: function SimulationFormComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"nav\", 0)(1, \"div\", 1)(2, \"ul\", 2)(3, \"li\", 3)(4, \"h1\", 4);\n          i0.ɵɵtext(5, \"\\u042D\\u0432\\u043E\\u043B\\u044E\\u0446\\u0438\\u044F\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelement(6, \"form\", 5);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(7, \"div\", 6)(8, \"header\", 7);\n          i0.ɵɵelement(9, \"img\", 8)(10, \"img\", 8);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(11, \"br\");\n          i0.ɵɵelementStart(12, \"div\", 9)(13, \"button\", 10);\n          i0.ɵɵlistener(\"click\", function SimulationFormComponent_Template_button_click_13_listener() {\n            return ctx.stopSimulation();\n          });\n          i0.ɵɵtext(14, \"\\u0417\\u0430\\u0432\\u0435\\u0440\\u0448\\u0438\\u0442\\u044C \\u0441\\u0438\\u043C\\u0443\\u043B\\u044F\\u0446\\u0438\\u044E\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(15, \"div\")(16, \"object\", 11);\n          i0.ɵɵtext(17, \" it's a rocketship! \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelement(18, \"svg\", 12);\n          i0.ɵɵelementStart(19, \"svg\", 13);\n          i0.ɵɵelement(20, \"path\", 14)(21, \"path\", 15);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(7);\n          i0.ɵɵstyleProp(\"width\", ctx.M, \"px\")(\"height\", ctx.N, \"px\");\n        }\n      },\n      dependencies: [CommonModule, FormsModule, i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.NgForm],\n      styles: [\".example[_ngcontent-%COMP%]{color:#006400;background-color:#5f9ea0}.ligo[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;float:none;color:#a6ff00}.field[_ngcontent-%COMP%]{position:relative;margin-left:auto;margin-right:auto;text-align:center;display:block;border:10px inset lightblue}.center[_ngcontent-%COMP%]{text-align:center}button[_ngcontent-%COMP%]{background-color:#d2691e}#bug-container[_ngcontent-%COMP%]{position:relative;height:200px}.bug-icon[_ngcontent-%COMP%]{height:15px;width:15px;position:absolute;top:0;left:0;z-index:0}\"]\n    });\n  }\n  return SimulationFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}